<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>二年级数学测试小练习</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4AAEFF',
                        secondary: '#FF9042',
                        accent: '#FFD166',
                        success: '#06D6A0',
                        danger: '#EF476F',
                        light: '#F8F9FA',
                        dark: '#212529'
                    },
                    fontFamily: {
                        sans: ['Comic Sans MS', 'Arial', 'sans-serif'],
                    },
                    animation: {
                        'bounce-slow': 'bounce 2s infinite',
                        'float': 'float 3s ease-in-out infinite',
                        'slide-in': 'slideIn 0.5s ease-out',
                        'fade-in': 'fadeIn 0.5s ease-out',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        },
                        slideIn: {
                            '0%': { transform: 'translateX(-100%)' },
                            '100%': { transform: 'translateX(0)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }
            .btn-number {
                @apply w-16 h-16 md:w-20 md:h-20 rounded-xl text-2xl md:text-3xl font-bold shadow-lg transition-all duration-200 transform hover:scale-110 hover:shadow-xl;
            }
            .btn-action {
                @apply px-6 py-3 rounded-xl text-xl font-bold shadow-lg transition-all duration-200 transform hover:scale-105 hover:shadow-xl;
            }
            .card {
                @apply bg-white rounded-2xl shadow-xl p-6 md:p-8;
            }
            .page {
                @apply fixed inset-0 transition-all duration-500;
            }
            .page-active {
                @apply opacity-100 z-10;
            }
            .page-inactive {
                @apply opacity-0 z-0 pointer-events-none;
            }
            .horse-theme {
                background: linear-gradient(135deg, #FF9A8B 0%, #FF6A88 100%);
            }
            .math-bg {
                background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            }
        }
    </style>
</head>
<body class="font-sans bg-light overflow-hidden">
    <!-- 背景图 -->
    <div class="fixed inset-0 z-0 opacity-20">
        <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/dbac9781686a4e9e8b0a69110b5fbf3e~tplv-a9rns2rl98-image.image?rcl=2026012417222014E4B2B63A67A00ADC8F&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1771838556&x-signature=ISpkqgK4ADqomJ86lgiobLA8Afg%3D" 
             alt="背景" class="w-full h-full object-cover">
    </div>

    <!-- 页面0：封面 -->
    <div id="page0" class="page page-active flex flex-col items-center justify-center min-h-screen p-4 relative z-10">
        <div class="card w-full max-w-2xl text-center animate-fade-in">
            <div class="mb-8">
                <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/289cf3e6f404474ba1bc5f6d393a6cea~tplv-a9rns2rl98-image.image?lk3s=8e244e95&rcl=2026012417222014E4B2B63A67A00ADC8F&rrcfp=f06b921b&x-expires=1771838567&x-signature=xGDlkg51zNugbNOeBSzRqJsDUYw%3D" 
                     alt="数学马老师" class="w-48 h-48 mx-auto animate-float">
            </div>
            <h1 class="text-5xl md:text-6xl font-bold text-primary mb-6 text-shadow">数学小马</h1>
            <p class="text-2xl md:text-3xl text-gray-700 mb-8">二年级数学测试小练习</p>
            <button id="start-btn" class="btn-action bg-secondary text-white text-2xl px-10 py-4 horse-theme">
                <i class="fa fa-play mr-2"></i>开始游戏
            </button>
        </div>
    </div>

    <!-- 页面1：速算马 -->
    <div id="page1" class="page page-inactive flex flex-col md:flex-row items-center justify-center min-h-screen p-4 relative z-10">
        <!-- 左侧题目区 -->
        <div class="w-full md:w-1/2 mb-8 md:mb-0 md:pr-4 flex flex-col items-center">
            <div class="card w-full max-w-md text-center animate-slide-in">
                <div class="mb-6">
                    <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/289cf3e6f404474ba1bc5f6d393a6cea~tplv-a9rns2rl98-image.image?lk3s=8e244e95&rcl=2026012417222014E4B2B63A67A00ADC8F&rrcfp=f06b921b&x-expires=1771838567&x-signature=xGDlkg51zNugbNOeBSzRqJsDUYw%3D" 
                         alt="数学马老师" class="w-32 h-32 mx-auto animate-float">
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-primary mb-6 text-shadow">速算马</h2>
                <div class="text-5xl md:text-6xl font-bold mb-8" id="math-expression">
                    45 ÷ 9 = ?
                </div>
                <div class="text-3xl md:text-4xl font-bold mb-6 text-gray-700">
                    当前题目: <span id="current-question">1</span>/4
                </div>
                <div class="flex justify-center items-center space-x-4">
                    <div class="text-4xl md:text-5xl font-bold text-primary" id="user-answer">
                        ?
                    </div>
                </div>
            </div>
        </div>

        <!-- 右侧键盘区 -->
        <div class="w-full md:w-1/2 md:pl-4 flex flex-col items-center">
            <div class="card w-full max-w-md animate-slide-in" style="animation-delay: 0.2s;">
                <h3 class="text-2xl font-bold text-center mb-6 text-secondary">请输入答案</h3>
                
                <!-- 数字键盘 -->
                <div class="grid grid-cols-3 gap-4 mb-6">
                    <button class="btn-number bg-blue-500 text-white" data-number="1">1</button>
                    <button class="btn-number bg-green-500 text-white" data-number="2">2</button>
                    <button class="btn-number bg-yellow-500 text-white" data-number="3">3</button>
                    <button class="btn-number bg-purple-500 text-white" data-number="4">4</button>
                    <button class="btn-number bg-pink-500 text-white" data-number="5">5</button>
                    <button class="btn-number bg-orange-500 text-white" data-number="6">6</button>
                    <button class="btn-number bg-teal-500 text-white" data-number="7">7</button>
                    <button class="btn-number bg-indigo-500 text-white" data-number="8">8</button>
                    <button class="btn-number bg-red-500 text-white" data-number="9">9</button>
                    <button class="btn-number bg-gray-500 text-white col-start-2" data-number="0">0</button>
                </div>
                
                <!-- 操作按钮 -->
                <div class="flex justify-between">
                    <button id="clear-btn" class="btn-action bg-gray-400 text-white">
                        <i class="fa fa-refresh mr-2"></i>清除
                    </button>
                    <button id="submit-btn" class="btn-action bg-success text-white">
                        提交<i class="fa fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 页面2：探数马 -->
    <div id="page2" class="page page-inactive flex flex-col md:flex-row items-center justify-center min-h-screen p-4 relative z-10">
        <!-- 左侧题目区 -->
        <div class="w-full md:w-1/2 mb-8 md:mb-0 md:pr-4 flex flex-col items-center">
            <div class="card w-full max-w-md text-center animate-slide-in">
                <div class="mb-6">
                    <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/289cf3e6f404474ba1bc5f6d393a6cea~tplv-a9rns2rl98-image.image?lk3s=8e244e95&rcl=2026012417222014E4B2B63A67A00ADC8F&rrcfp=f06b921b&x-expires=1771838567&x-signature=xGDlkg51zNugbNOeBSzRqJsDUYw%3D" 
                         alt="数学马老师" class="w-32 h-32 mx-auto animate-float">
                </div>
                <h2 class="text-3xl md:text-4xl font-bold text-primary mb-6 text-shadow">探数马</h2>
                <div class="text-2xl md:text-3xl font-bold mb-8 text-left" id="fill-expression">
                    一盒积木7元，40元可以买（<span class="inline-block w-8 h-8 md:w-10 md:h-10 bg-yellow-200 rounded-lg border-2 border-dashed border-yellow-500 mx-1"></span>）盒积木，还剩（<span class="inline-block w-8 h-8 md:w-10 md:h-10 bg-yellow-200 rounded-lg border-2 border-dashed border-yellow-500 mx-1"></span>）元
                </div>
                <div class="text-3xl md:text-4xl font-bold mb-6 text-gray-700">
                    当前题目: <span id="current-fill-question">1</span>/2
                </div>
                <div class="flex justify-center items-center space-x-4">
                    <div class="text-4xl md:text-5xl font-bold text-primary" id="user-fill-answer">
                        ?
                    </div>
                </div>
            </div>
        </div>

        <!-- 右侧键盘区 -->
        <div class="w-full md:w-1/2 md:pl-4 flex flex-col items-center">
            <div class="card w-full max-w-md animate-slide-in" style="animation-delay: 0.2s;">
                <h3 class="text-2xl font-bold text-center mb-6 text-secondary">请输入答案</h3>
                
                <!-- 数字键盘 -->
                <div class="grid grid-cols-3 gap-4 mb-6">
                    <button class="btn-number bg-blue-500 text-white" data-fill-number="1">1</button>
                    <button class="btn-number bg-green-500 text-white" data-fill-number="2">2</button>
                    <button class="btn-number bg-yellow-500 text-white" data-fill-number="3">3</button>
                    <button class="btn-number bg-purple-500 text-white" data-fill-number="4">4</button>
                    <button class="btn-number bg-pink-500 text-white" data-fill-number="5">5</button>
                    <button class="btn-number bg-orange-500 text-white" data-fill-number="6">6</button>
                    <button class="btn-number bg-teal-500 text-white" data-fill-number="7">7</button>
                    <button class="btn-number bg-indigo-500 text-white" data-fill-number="8">8</button>
                    <button class="btn-number bg-red-500 text-white" data-fill-number="9">9</button>
                    <button class="btn-number bg-gray-500 text-white col-start-2" data-fill-number="0">0</button>
                </div>
                
                <!-- 操作按钮 -->
                <div class="flex justify-between">
                    <button id="fill-clear-btn" class="btn-action bg-gray-400 text-white">
                        <i class="fa fa-refresh mr-2"></i>清除
                    </button>
                    <button id="fill-submit-btn" class="btn-action bg-success text-white">
                        提交<i class="fa fa-arrow-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 页面3：结果反馈 -->
    <div id="page3" class="page page-inactive flex flex-col items-center justify-center min-h-screen p-4 relative z-10">
        <div class="card w-full max-w-2xl text-center animate-fade-in">
            <div class="mb-8">
                <img src="https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/289cf3e6f404474ba1bc5f6d393a6cea~tplv-a9rns2rl98-image.image?lk3s=8e244e95&rcl=2026012417222014E4B2B63A67A00ADC8F&rrcfp=f06b921b&x-expires=1771838567&x-signature=xGDlkg51zNugbNOeBSzRqJsDUYw%3D" 
                     alt="数学马老师" class="w-40 h-40 mx-auto animate-float">
            </div>
            <h2 class="text-4xl md:text-5xl font-bold text-primary mb-6 text-shadow">测试完成！</h2>
            
            <div class="mb-8">
                <div class="text-2xl md:text-3xl font-bold mb-4">你的成绩</div>
                <div class="flex justify-center items-center">
                    <div class="w-40 h-40 md:w-48 md:h-48 rounded-full bg-gradient-to-r from-primary to-secondary flex items-center justify-center text-white text-4xl md:text-6xl font-bold" id="score-circle">
                        85%
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-4 mb-8">
                <div class="bg-blue-100 rounded-xl p-4">
                    <div class="text-lg font-bold text-blue-800">速算题</div>
                    <div class="text-2xl font-bold text-blue-600" id="oral-score">4/4</div>
                </div>
                <div class="bg-green-100 rounded-xl p-4">
                    <div class="text-lg font-bold text-green-800">填空题</div>
                    <div class="text-2xl font-bold text-green-600" id="fill-score">3/4</div>
                </div>
            </div>
            
            <div class="text-xl mb-8" id="encouragement">
                太棒了！继续努力哦！
            </div>
            
            <button id="restart-btn" class="btn-action bg-secondary text-white text-2xl px-8 py-4 horse-theme">
                <i class="fa fa-refresh mr-2"></i>重新闯关
            </button>
        </div>
    </div>

    <script>
        // 全局数据
        const gameData = {
            oralQuestionsSets: [
                [
                    { expression: '45 ÷ 9 = ?', answer: '5' },
                    { expression: '7 × 4 = ?', answer: '28' },
                    { expression: '70 － 49 = ?', answer: '21' },
                    { expression: '16 ÷ 8 × 7 = ?', answer: '14' }
                ],
                [
                    { expression: '42 ÷ 7 = ?', answer: '6' },
                    { expression: '4 × 8 = ?', answer: '32' },
                    { expression: '12 ＋ 38 = ?', answer: '50' },
                    { expression: '54 ÷ 9 ÷ 3 = ?', answer: '2' }
                ],
                [
                    { expression: '6 × 5 = ?', answer: '30' },
                    { expression: '81 ÷ 9 = ?', answer: '9' },
                    { expression: '38 ＋ 23 = ?', answer: '61' },
                    { expression: '3 × 3 × 7 = ?', answer: '63' }
                ]
            ],
            fillQuestionsSets: [
                [
                    { 
                        expression: '一盒积木7元，40元可以买（?）盒积木，还剩（?）元', 
                        answers: ['5', '5'],
                        currentAnswerIndex: 0
                    },
                    { 
                        expression: '学校鼓号队原来有48名队员，本学期又招收了16名新队员。现在一共有（?）名队员。表演时，队员们站的排数和每排人数同样多，每排有（?）人', 
                        answers: ['64', '8'],
                        currentAnswerIndex: 0
                    }
                ],
                [
                    { 
                        expression: '一盒积木8元，50元可以买（?）盒积木，还剩（?）元', 
                        answers: ['6', '2'],
                        currentAnswerIndex: 0
                    },
                    { 
                        expression: '学校鼓号队原来有66名队员，本学期有17名队员退出。现在一共有（?）名队员。表演时，队员们站的排数和每排人数同样多，每排有（?）人', 
                        answers: ['49', '7'],
                        currentAnswerIndex: 0
                    }
                ]
            ],
            selectedOralSet: 0,
            selectedFillSet: 0,
            currentOralIndex: 0,
            currentFillIndex: 0,
            oralCorrect: 0,
            fillCorrect: 0,
            userAnswers: [],
            currentAnswer: '',
            currentFillAnswers: []
        };

        // 初始化游戏
        function initGame() {
            // 随机选择题目组
            gameData.selectedOralSet = Math.floor(Math.random() * gameData.oralQuestionsSets.length);
            gameData.selectedFillSet = Math.floor(Math.random() * gameData.fillQuestionsSets.length);
            
            // 重置游戏状态
            gameData.currentOralIndex = 0;
            gameData.currentFillIndex = 0;
            gameData.oralCorrect = 0;
            gameData.fillCorrect = 0;
            gameData.userAnswers = [];
            gameData.currentAnswer = '';
            gameData.currentFillAnswers = [];
            
            // 重置填空题的当前答案索引
            gameData.fillQuestionsSets[gameData.selectedFillSet].forEach(question => {
                question.currentAnswerIndex = 0;
            });
            
            // 显示第一题
            showOralQuestion();
        }

        // 显示当前口算题
        function showOralQuestion() {
            const question = gameData.oralQuestionsSets[gameData.selectedOralSet][gameData.currentOralIndex];
            document.getElementById('math-expression').textContent = question.expression;
            document.getElementById('current-question').textContent = gameData.currentOralIndex + 1;
            document.getElementById('user-answer').textContent = '?';
            gameData.currentAnswer = '';
        }

        // 显示当前填空题
        function showFillQuestion() {
            const question = gameData.fillQuestionsSets[gameData.selectedFillSet][gameData.currentFillIndex];
            let expressionHtml = question.expression;
            
            // 替换所有问号为提示框，但只对当前需要回答的空使用虚线边框
            for (let i = 0; i < question.answers.length; i++) {
                const isCurrentAnswer = i === question.currentAnswerIndex;
                const boxClass = isCurrentAnswer 
                    ? 'bg-yellow-200 border-dashed border-yellow-500' 
                    : 'bg-gray-100 border-gray-300';
                
                expressionHtml = expressionHtml.replace(/\?/, 
                    `<span class="inline-block w-8 h-8 md:w-10 md:h-10 ${boxClass} rounded-lg border-2 mx-1"></span>`
                );
            }
            
            document.getElementById('fill-expression').innerHTML = expressionHtml;
            document.getElementById('current-fill-question').textContent = gameData.currentFillIndex + 1;
            document.getElementById('user-fill-answer').textContent = '?';
            gameData.currentAnswer = '';
        }

        // 切换页面
        function switchPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('page-inactive');
                page.classList.remove('page-active');
            });
            
            document.getElementById(pageId).classList.add('page-active');
            document.getElementById(pageId).classList.remove('page-inactive');
        }

        // 检查口算答案
        function checkOralAnswer() {
            const question = gameData.oralQuestionsSets[gameData.selectedOralSet][gameData.currentOralIndex];
            const isCorrect = question.answer === gameData.currentAnswer;
            
            if (isCorrect) {
                gameData.oralCorrect++;
                document.getElementById('user-answer').textContent = '✓';
                document.getElementById('user-answer').className = 'text-4xl md:text-5xl font-bold text-success';
            } else {
                document.getElementById('user-answer').textContent = '✗';
                document.getElementById('user-answer').className = 'text-4xl md:text-5xl font-bold text-danger';
            }
            
            // 记录答案
            gameData.userAnswers.push({
                type: 'oral',
                question: question.expression,
                correctAnswer: question.answer,
                userAnswer: gameData.currentAnswer,
                isCorrect: isCorrect
            });
            
            // 延迟后进入下一题或下一页
            setTimeout(() => {
                gameData.currentOralIndex++;
                if (gameData.currentOralIndex < gameData.oralQuestionsSets[gameData.selectedOralSet].length) {
                    showOralQuestion();
                } else {
                    // 切换到填空题页面
                    switchPage('page2');
                    showFillQuestion();
                }
            }, 1000);
        }

        // 检查填空答案
        function checkFillAnswer() {
            const question = gameData.fillQuestionsSets[gameData.selectedFillSet][gameData.currentFillIndex];
            const isCorrect = question.answers[question.currentAnswerIndex] === gameData.currentAnswer;
            
            if (isCorrect) {
                // 填空题每个正确答案计1分
                gameData.fillCorrect++;
                document.getElementById('user-fill-answer').textContent = '✓';
                document.getElementById('user-fill-answer').className = 'text-4xl md:text-5xl font-bold text-success';
            } else {
                document.getElementById('user-fill-answer').textContent = '✗';
                document.getElementById('user-fill-answer').className = 'text-4xl md:text-5xl font-bold text-danger';
            }
            
            // 记录答案
            gameData.userAnswers.push({
                type: 'fill',
                question: question.expression,
                correctAnswer: question.answers[question.currentAnswerIndex],
                userAnswer: gameData.currentAnswer,
                isCorrect: isCorrect
            });
            
            // 延迟后进入下一个填空或下一题
            setTimeout(() => {
                question.currentAnswerIndex++;
                if (question.currentAnswerIndex < question.answers.length) {
                    // 继续回答当前题目的下一个空
                    showFillQuestion();
                } else {
                    // 当前题目完成，进入下一题
                    gameData.currentFillIndex++;
                    if (gameData.currentFillIndex < gameData.fillQuestionsSets[gameData.selectedFillSet].length) {
                        showFillQuestion();
                    } else {
                        // 所有题目完成，显示结果
                        showResults();
                        switchPage('page3');
                    }
                }
            }, 1000);
        }

        // 显示结果
        function showResults() {
            const totalQuestions = gameData.oralQuestionsSets[gameData.selectedOralSet].length + 
                                  gameData.fillQuestionsSets[gameData.selectedFillSet].reduce((total, q) => total + q.answers.length, 0);
            const totalCorrect = gameData.oralCorrect + gameData.fillCorrect;
            const percentage = Math.round((totalCorrect / totalQuestions) * 100);
            
            document.getElementById('score-circle').textContent = `${percentage}%`;
            document.getElementById('oral-score').textContent = `${gameData.oralCorrect}/${gameData.oralQuestionsSets[gameData.selectedOralSet].length}`;
            document.getElementById('fill-score').textContent = `${gameData.fillCorrect}/${gameData.fillQuestionsSets[gameData.selectedFillSet].reduce((total, q) => total + q.answers.length, 0)}`;
            
            // 根据得分显示不同的鼓励语
            const encouragementEl = document.getElementById('encouragement');
            if (percentage >= 90) {
                encouragementEl.textContent = '太棒了！你是数学小天才！';
                encouragementEl.className = 'text-xl mb-8 text-success font-bold';
            } else if (percentage >= 70) {
                encouragementEl.textContent = '做得很好！继续努力哦！';
                encouragementEl.className = 'text-xl mb-8 text-primary font-bold';
            } else if (percentage >= 50) {
                encouragementEl.textContent = '不错的尝试！再多练习一下吧！';
                encouragementEl.className = 'text-xl mb-8 text-secondary font-bold';
            } else {
                encouragementEl.textContent = '加油！你可以做得更好的！';
                encouragementEl.className = 'text-xl mb-8 text-danger font-bold';
            }
        }

        // 事件监听器
        document.addEventListener('DOMContentLoaded', () => {
            // 开始游戏按钮
            document.getElementById('start-btn').addEventListener('click', () => {
                initGame();
                switchPage('page1');
            });
            
            // 数字按钮点击事件（口算题）
            document.querySelectorAll('[data-number]').forEach(button => {
                button.addEventListener('click', () => {
                    const number = button.getAttribute('data-number');
                    gameData.currentAnswer += number;
                    document.getElementById('user-answer').textContent = gameData.currentAnswer;
                });
            });
            
            // 数字按钮点击事件（填空题）
            document.querySelectorAll('[data-fill-number]').forEach(button => {
                button.addEventListener('click', () => {
                    const number = button.getAttribute('data-fill-number');
                    gameData.currentAnswer += number;
                    document.getElementById('user-fill-answer').textContent = gameData.currentAnswer;
                });
            });
            
            // 清除按钮（口算题）
            document.getElementById('clear-btn').addEventListener('click', () => {
                gameData.currentAnswer = '';
                document.getElementById('user-answer').textContent = '?';
            });
            
            // 清除按钮（填空题）
            document.getElementById('fill-clear-btn').addEventListener('click', () => {
                gameData.currentAnswer = '';
                document.getElementById('user-fill-answer').textContent = '?';
            });
            
            // 提交按钮（口算题）
            document.getElementById('submit-btn').addEventListener('click', () => {
                if (gameData.currentAnswer !== '') {
                    checkOralAnswer();
                }
            });
            
            // 提交按钮（填空题）
            document.getElementById('fill-submit-btn').addEventListener('click', () => {
                if (gameData.currentAnswer !== '') {
                    checkFillAnswer();
                }
            });
            
            // 重新闯关按钮
            document.getElementById('restart-btn').addEventListener('click', () => {
                switchPage('page0');
            });
            
            // 键盘支持
            document.addEventListener('keydown', (e) => {
                const activePage = document.querySelector('.page-active').id;
                
                if (activePage === 'page1' || activePage === 'page2') {
                    const key = e.key;
                    
                    if (key >= '0' && key <= '9') {
                        // 数字键
                        gameData.currentAnswer += key;
                        if (activePage === 'page1') {
                            document.getElementById('user-answer').textContent = gameData.currentAnswer;
                        } else {
                            document.getElementById('user-fill-answer').textContent = gameData.currentAnswer;
                        }
                    } else if (key === 'Enter') {
                        // 回车键提交
                        if (gameData.currentAnswer !== '') {
                            if (activePage === 'page1') {
                                checkOralAnswer();
                            } else {
                                checkFillAnswer();
                            }
                        }
                    } else if (key === 'Escape' || key === 'Backspace') {
                        // 清除
                        gameData.currentAnswer = '';
                        if (activePage === 'page1') {
                            document.getElementById('user-answer').textContent = '?';
                        } else {
                            document.getElementById('user-fill-answer').textContent = '?';
                        }
                    }
                } else if (activePage === 'page0' && e.key === 'Enter') {
                    // 封面页按回车开始游戏
                    initGame();
                    switchPage('page1');
                } else if (activePage === 'page3' && e.key === 'Enter') {
                    // 结果页按回车重新开始
                    switchPage('page0');
                }
            });
        });
    </script>
</body>
</html>
