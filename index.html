<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºŒå¹´çº§æ•°å­¦é—¯å…³å°æ¸¸æˆ - å°é©¬é€Ÿç®—</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: "Microsoft YaHei", å¹¼åœ†, sans-serif;
        }
        body {
            background-color: #f9f5e8;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        .game-container {
            max-width: 1280px;
            max-height: 720px;
            width: 100%;
            height: 95vh;
            background-color: #fff;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(180, 210, 255, 0.6);
            display: flex;
            position: relative;
        }
        .question-area {
            flex: 10;
            height: 100%;
            background-color: #e6f3ff;
            padding: 20px 30px;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .keyboard-area {
            flex: 6;
            height: 100%;
            background-color: #fff9e8;
            padding: 20px 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 15px;
        }
        .level-title {
            text-align: center;
            font-size: 36px;
            color: #2a78e4;
            margin-bottom: 25px;
            font-weight: bold;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        .title-icon {
            font-size: 42px;
        }
        /* â˜…æ ¸å¿ƒä¼˜åŒ–ï¼šé¢˜ç›®æ’ç‰ˆ å½»åº•è§£å†³ç¬¬äºŒå…³æ¢è¡Œé—®é¢˜ */
        .question-box {
            margin-bottom: 25px;
            font-size: 28px;
            color: #333;
            line-height: 1.8;
            display: block;
        }
        /* å¡«ç©ºæ¡†æ ·å¼-æ ¸å¿ƒäº¤äº’ç»„ä»¶ */
        .answer-input {
            width: 70px;
            height: 45px;
            border: 3px solid #b4d2ff;
            border-radius: 10px;
            font-size: 26px;
            text-align: center;
            margin: 0 5px;
            outline: none;
            color: #2a78e4;
            font-weight: bold;
            caret-color: #2a78e4;
            white-space: nowrap;
            overflow: hidden;
            vertical-align: middle;
        }
        .answer-input.active {
            border-color: #ff9d4d;
            background-color: #fff3e8;
            box-shadow: 0 0 10px rgba(255, 157, 77, 0.6);
        }
        /* åº”ç”¨é¢˜ä¸“ç”¨æ ·å¼ï¼Œå®Œç¾é€‚é…é•¿æ–‡æœ¬ï¼Œæ— å¤šä½™æ¢è¡Œ */
        .long-question {
            font-size: 26px;
            line-height: 2;
            text-align: justify;
        }
        .num-keyboard {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            width: 100%;
            flex: 1;
        }
        .num-btn {
            width: 100%;
            height: 60px;
            border-radius: 15px;
            border: none;
            background-color: #d1e7ff;
            color: #2a78e4;
            font-size: 32px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .num-btn:hover {
            background-color: #b4d2ff;
            transform: scale(1.05);
        }
        .func-keyboard {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            width: 100%;
        }
        .func-btn {
            height: 55px;
            border-radius: 12px;
            border: none;
            color: #fff;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }
        .func-btn:hover {
            transform: scale(1.03);
        }
        .switch-btn { background-color: #4da6ff; }
        .del-btn { background-color: #ff9d4d; }
        .submit-btn {
            background-color: #54c763;
            grid-column: span 2;
        }
        .submit-btn:disabled {
            background-color: #c0c0c0;
            cursor: not-allowed;
            transform: none;
        }
        .result-page {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 30px;
        }
        .result-title {
            font-size: 42px;
            color: #2a78e4;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        .result-item {
            font-size: 32px;
            color: #333;
            margin-bottom: 25px;
            text-align: center;
            line-height: 1.8;
        }
        .success { color: #54c763; font-weight: bold; }
        .fail { color: #ff6b6b; font-weight: bold; }
        .restart-btn {
            margin-top: 30px;
            width: 260px;
            height: 70px;
            background-color: #2a78e4;
            color: #fff;
            border: none;
            border-radius: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .restart-btn:hover {
            background-color: #1a62cc;
            transform: scale(1.05);
        }
        .pony-decoration {
            position: absolute;
            font-size: 50px;
            opacity: 0.2;
            z-index: 1;
        }
        .pony1 { top: 15px; right: 20px; }
        .pony2 { bottom: 15px; left: 20px; }
        .page {
            width: 100%;
            height: 100%;
            display: none;
        }
        .page.show {
            display: flex;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="page level1-page show" id="level1">
            <div class="question-area">
                <div class="level-title">
                    <span class="title-icon">ğŸ</span>å°é©¬é€Ÿç®—<span class="title-icon">ğŸ</span>
                </div>
                <div class="question-box">â‘  45 Ã· 9 = <input type="text" class="answer-input" maxlength="2" data-ans="5"></div>
                <div class="question-box">â‘¡ 7 Ã— 4 = <input type="text" class="answer-input" maxlength="2" data-ans="28"></div>
                <div class="question-box">â‘¢ 70 - 49 = <input type="text" class="answer-input" maxlength="2" data-ans="21"></div>
                <div class="question-box">â‘£ 16 Ã· 8 Ã— 7 = <input type="text" class="answer-input" maxlength="2" data-ans="14"></div>
                <div class="pony-decoration pony1">ğŸ¦„</div>
            </div>
            <div class="keyboard-area">
                <div class="num-keyboard">
                    <button class="num-btn">1</button><button class="num-btn">2</button><button class="num-btn">3</button>
                    <button class="num-btn">4</button><button class="num-btn">5</button><button class="num-btn">6</button>
                    <button class="num-btn">7</button><button class="num-btn">8</button><button class="num-btn">9</button>
                    <button class="num-btn" style="grid-column: 2;">0</button>
                </div>
                <div class="func-keyboard">
                    <button class="func-btn switch-btn" id="prevInput">â¬… ä¸Šä¸€ç©º</button>
                    <button class="func-btn switch-btn" id="nextInput">ä¸‹ä¸€ç©º â¡</button>
                    <button class="func-btn del-btn" id="delBtn">ğŸ—‘ï¸ åˆ é™¤</button>
                    <button class="func-btn submit-btn" id="submit1">ç¡®è®¤æäº¤</button>
                </div>
            </div>
        </div>

        <div class="page level2-page" id="level2">
            <div class="question-area">
                <div class="level-title">
                    <span class="title-icon">ğŸ</span>å°é©¬æ¢æ•°<span class="title-icon">ğŸ</span>
                </div>
                <div class="question-box long-question">â‘  ä¸€ç›’ç§¯æœ¨8å…ƒï¼Œ50å…ƒå¯ä»¥ä¹° <input type="text" class="answer-input" maxlength="2" data-ans="6"> ç›’ç§¯æœ¨ï¼Œè¿˜å‰© <input type="text" class="answer-input" maxlength="2" data-ans="2"> å…ƒã€‚</div>
                <div class="question-box long-question" style="margin-top: 20px;">â‘¡ å­¦æ ¡é¼“å·é˜ŸåŸæ¥æœ‰48åé˜Ÿå‘˜ï¼Œæœ¬å­¦æœŸåˆæ‹›æ”¶äº†16åæ–°é˜Ÿå‘˜ã€‚ç°åœ¨ä¸€å…±æœ‰ <input type="text" class="answer-input" maxlength="2" data-ans="64"> åé˜Ÿå‘˜ã€‚è¡¨æ¼”æ—¶ï¼Œé˜Ÿå‘˜ä»¬ç«™çš„æ’æ•°å’Œæ¯æ’äººæ•°åŒæ ·å¤šï¼Œæ¯æ’æœ‰ <input type="text" class="answer-input" maxlength="2" data-ans="8"> äººã€‚</div>
                <div class="pony-decoration pony2">ğŸ¦„</div>
            </div>
            <div class="keyboard-area">
                <div class="num-keyboard">
                    <button class="num-btn">1</button><button class="num-btn">2</button><button class="num-btn">3</button>
                    <button class="num-btn">4</button><button class="num-btn">5</button><button class="num-btn">6</button>
                    <button class="num-btn">7</button><button class="num-btn">8</button><button class="num-btn">9</button>
                    <button class="num-btn" style="grid-column: 2;">0</button>
                </div>
                <div class="func-keyboard">
                    <button class="func-btn switch-btn" id="prevInput2">â¬… ä¸Šä¸€ç©º</button>
                    <button class="func-btn switch-btn" id="nextInput2">ä¸‹ä¸€ç©º â¡</button>
                    <button class="func-btn del-btn" id="delBtn2">ğŸ—‘ï¸ åˆ é™¤</button>
                    <button class="func-btn submit-btn" id="submit2">ç¡®è®¤æäº¤</button>
                </div>
            </div>
        </div>

        <div class="page result-page" id="result">
            <div class="result-title"><span>ğŸ†</span>é—¯å…³ç»“æœç»Ÿè®¡<span>ğŸ†</span></div>
            <div class="result-item" id="result1">ç¬¬ä¸€å…³ï¼šç­”å¯¹ <span id="level1-correct">0</span> é¢˜/å…±4é¢˜ï¼Œ<span id="res1-status" class="fail">é—¯å…³å¤±è´¥</span></div>
            <div class="result-item" id="result2">ç¬¬äºŒå…³ï¼šç­”å¯¹ <span id="level2-correct">0</span> é¢˜/å…±4é¢˜ï¼Œ<span id="res2-status" class="fail">é—¯å…³å¤±è´¥</span></div>
            <button class="restart-btn" id="restartBtn">é‡æ–°å¼€å§‹é—¯å…³</button>
            <div class="pony-decoration pony1" style="top: 50px; right: 100px;">ğŸ</div>
            <div class="pony-decoration pony2" style="bottom: 50px; left: 100px;">ğŸ</div>
        </div>
    </div>

    <script>
        let currentLevel = 1;
        let currentInputIndex = 0;
        let level1Correct = 0;
        let level2Correct = 0;
        // è·å–æ‰€æœ‰è¾“å…¥æ¡†+é¡µé¢èŠ‚ç‚¹+æŒ‰é’®èŠ‚ç‚¹+ç»“æœèŠ‚ç‚¹ï¼Œå…¨å±€å¤ç”¨ï¼Œé¿å…é‡å¤è·å–
        const allInputs1 = document.querySelectorAll('#level1 .answer-input');
        const allInputs2 = document.querySelectorAll('#level2 .answer-input');
        const level1Page = document.getElementById('level1');
        const level2Page = document.getElementById('level2');
        const resultPage = document.getElementById('result');
        const submit1 = document.getElementById('submit1');
        const submit2 = document.getElementById('submit2');
        // ç»“æœé¡µä¸“ç”¨èŠ‚ç‚¹ï¼Œå•ç‹¬è·å–ï¼Œé¿å…æ¯æ¬¡æŸ¥æ‰¾
        const level1CorrectDom = document.getElementById('level1-correct');
        const level2CorrectDom = document.getElementById('level2-correct');
        const res1Status = document.getElementById('res1-status');
        const res2Status = document.getElementById('res2-status');

        // åˆå§‹åŒ–ç¬¬ä¸€å…³
        initInput(allInputs1);

        // é€šç”¨åˆå§‹åŒ–å¡«ç©ºæ¡†æ–¹æ³•
        function initInput(inputs) {
            if(inputs.length > 0) {
                inputs.forEach(i => i.classList.remove('active'));
                inputs[0].classList.add('active');
                inputs.forEach((input, idx) => {
                    input.addEventListener('click', () => {
                        inputs.forEach(i => i.classList.remove('active'));
                        input.classList.add('active');
                        currentInputIndex = idx;
                    });
                });
            }
        }

        // ç²¾å‡†åŒ¹é…å½“å‰å…³å¡è¾“å…¥æ¡†ï¼Œæ•°å­—è¾“å…¥æ­£å¸¸
        document.querySelectorAll('.num-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                let activeInput = null;
                if(currentLevel === 1) {
                    activeInput = document.querySelector('#level1 .answer-input.active');
                } else if(currentLevel === 2) {
                    activeInput = document.querySelector('#level2 .answer-input.active');
                }
                if(activeInput) {
                    activeInput.value = (activeInput.value + btn.textContent).slice(0, 2);
                    activeInput.focus();
                }
            });
        });

        // ========== ç¬¬ä¸€å…³ æ ¸å¿ƒé€»è¾‘ ==========
        document.getElementById('prevInput').addEventListener('click', () => switchInput(allInputs1, 'prev'));
        document.getElementById('nextInput').addEventListener('click', () => switchInput(allInputs1, 'next'));
        document.getElementById('delBtn').addEventListener('click', () => {
            const activeInput = document.querySelector('#level1 .answer-input.active');
            if(activeInput) activeInput.value = '';
        });
        submit1.addEventListener('click', function() {
            this.disabled = true;
            level1Correct = countCorrect(allInputs1);
            setTimeout(() => {
                level1Page.classList.remove('show');
                level2Page.classList.add('show');
                resultPage.classList.remove('show');
                currentLevel = 2;
                currentInputIndex = 0;
                initInput(allInputs2);
            }, 300);
        });

        // ========== ç¬¬äºŒå…³ æ ¸å¿ƒé€»è¾‘ ==========
        document.getElementById('prevInput2').addEventListener('click', () => switchInput(allInputs2, 'prev'));
        document.getElementById('nextInput2').addEventListener('click', () => switchInput(allInputs2, 'next'));
        document.getElementById('delBtn2').addEventListener('click', () => {
            const activeInput = document.querySelector('#level2 .answer-input.active');
            if(activeInput) activeInput.value = '';
        });
        submit2.addEventListener('click', function() {
            this.disabled = true;
            level2Correct = countCorrect(allInputs2);
            setTimeout(() => {
                level1Page.classList.remove('show');
                level2Page.classList.remove('show');
                resultPage.classList.add('show');
                showResult(); // âœ… å»¶è¿Ÿåæ¸²æŸ“æœ€æ–°ç»“æœï¼Œå¿…åˆ·æ–°
            }, 300);
        });

        // ========== ç»Ÿè®¡é¡µ é‡æ–°å¼€å§‹ æ ¸å¿ƒé€»è¾‘ã€é‡ä¸­ä¹‹é‡ï¼Œå½»åº•é‡ç½®æ‰€æœ‰çŠ¶æ€+æ•°æ®æ¸…é›¶ã€‘ ==========
        document.getElementById('restartBtn').addEventListener('click', () => {
            // 1. é‡ç½®æ‰€æœ‰å…¨å±€å˜é‡ï¼Œæ•°æ®å½»åº•æ¸…é›¶ï¼Œå¹²å¹²å‡€å‡€æ— æ®‹ç•™
            currentLevel = 1;
            currentInputIndex = 0;
            level1Correct = 0;
            level2Correct = 0;
            // 2. é‡ç½®æ‰€æœ‰è¾“å…¥æ¡†ï¼šæ¸…ç©ºå†…å®¹+ç§»é™¤æ¿€æ´»çŠ¶æ€ï¼Œæ¢å¤åˆå§‹æ ·å¼
            allInputs1.forEach(i => {i.value = ''; i.classList.remove('active')});
            allInputs2.forEach(i => {i.value = ''; i.classList.remove('active')});
            // 3. æ ¸å¿ƒä¿®å¤ï¼šè§£é™¤ä¸¤ä¸ªæäº¤æŒ‰é’®çš„ç¦ç”¨çŠ¶æ€ï¼Œå¿…å†™ï¼
            submit1.disabled = false;
            submit2.disabled = false;
            // 4. æ’ä»–æ€§åˆ‡æ¢é¡µé¢ï¼Œå›åˆ°åˆå§‹çŠ¶æ€ï¼Œæ°¸è¿œåªæœ‰ä¸€ä¸ªé¡µé¢æ˜¾ç¤º
            level1Page.classList.add('show');
            level2Page.classList.remove('show');
            resultPage.classList.remove('show');
            // 5. é‡æ–°åˆå§‹åŒ–ç¬¬ä¸€å…³è¾“å…¥æ¡†æ¿€æ´»çŠ¶æ€
            initInput(allInputs1);
            // 6. å…œåº•ï¼šé‡ç½®ç»“æœé¡µé»˜è®¤æ˜¾ç¤ºï¼Œé˜²æ­¢æ•°æ®æ®‹ç•™
            resetResultDefault();
        });

        // ========== é€šç”¨å·¥å…·æ–¹æ³• ==========
        function switchInput(inputs, type) {
            inputs[currentInputIndex].classList.remove('active');
            if(type === 'prev') {
                currentInputIndex = currentInputIndex === 0 ? inputs.length -1 : currentInputIndex -1;
            } else {
                currentInputIndex = currentInputIndex === inputs.length -1 ? 0 : currentInputIndex +1;
            }
            inputs[currentInputIndex].classList.add('active');
            inputs[currentInputIndex].focus();
        }

        function countCorrect(inputs) {
            let correct = 0;
            inputs.forEach(input => {
                if(input.value.trim() === input.dataset.ans) correct++;
            });
            return correct;
        }

        // âœ… æ ¸å¿ƒä¿®å¤ï¼šé‡æ„showResultæ–¹æ³•ï¼Œã€åªä¿®æ”¹æ–‡æœ¬å†…å®¹ï¼Œä¸ç ´åDOMç»“æ„ã€‘ï¼Œæ°¸ä¹…è§£å†³ä¸åˆ·æ–°é—®é¢˜
        function showResult() {
            // åªä¿®æ”¹æ•°å€¼ï¼Œä¸æ”¹åŠ¨ä»»ä½•æ ‡ç­¾ç»“æ„
            level1CorrectDom.textContent = level1Correct;
            level2CorrectDom.textContent = level2Correct;
            
            // åªä¿®æ”¹çŠ¶æ€æ–‡æœ¬å’Œæ ·å¼ç±»ï¼Œä¸æ‹¼æ¥HTMLï¼ŒDOMæ°¸è¿œå®Œå¥½
            if(level1Correct === 4){
                res1Status.className = 'success';
                res1Status.textContent = 'é—¯å…³æˆåŠŸ';
            }else{
                res1Status.className = 'fail';
                res1Status.textContent = 'é—¯å…³å¤±è´¥';
            }

            if(level2Correct >= 3){
                res2Status.className = 'success';
                res2Status.textContent = 'é—¯å…³æˆåŠŸ';
            }else{
                res2Status.className = 'fail';
                res2Status.textContent = 'é—¯å…³å¤±è´¥';
            }
        }

        // âœ… æ–°å¢ï¼šé‡ç½®ç»“æœé¡µé»˜è®¤çŠ¶æ€ï¼Œå…œåº•é˜²æ®‹ç•™
        function resetResultDefault() {
            level1CorrectDom.textContent = 0;
            level2CorrectDom.textContent = 0;
            res1Status.className = 'fail';
            res1Status.textContent = 'é—¯å…³å¤±è´¥';
            res2Status.className = 'fail';
            res2Status.textContent = 'é—¯å…³å¤±è´¥';
        }
    </script>
</body>
</html>